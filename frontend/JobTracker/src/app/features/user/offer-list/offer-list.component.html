<div class="table-container">
  <div
    class="header-flex"
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 10px;
    "
  >
    <h2 style="margin: 0; border: none">My Offers</h2>

    <div style="display: flex; gap: 10px">
      <select
        [ngModel]="filterType()"
        (ngModelChange)="filterType.set($any($event))"
        class="form-select"
      >
        <option value="All">All Offers</option>
        <option value="Active">Active Only</option>
        <option value="Expired">Expired Only</option>
      </select>

      <select
        [ngModel]="sortType()"
        (ngModelChange)="sortType.set($any($event))"
        class="form-select"
      >
        <option value="Default">Sort: Deadline</option>
        <option value="SalaryHigh">Salary: High to Low</option>
        <option value="SalaryLow">Salary: Low to High</option>
      </select>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Company</th>
        <th>Position</th>
        <th>Salary Offer</th>
        <th>Deadline</th>
        <th>Benefits</th>
        <th class="text-center">View / Edit</th>
      </tr>
    </thead>
    <tbody>
      @for (offer of offers(); track offer.id) {
      <tr>
        <td class="fw-bold">{{ offer.companyName }}</td>
        <td>{{ offer.jobPosition }}</td>
        <td style="color: #27ae60; font-weight: bold">
          {{ offer.salary | currency : "USD" : "symbol" : "1.0-0" }}
        </td>
        <td>
          <span [style.color]="offer.deadline < now ? 'red' : 'inherit'">
            {{ offer.deadline | date : "mediumDate" }}
          </span>
        </td>
        <td class="notes-cell" [title]="offer.benefits">
          {{ offer.benefits || "-" }}
        </td>
        <td class="text-center">
          <a
            [routerLink]="['/user/offers/edit', offer.id]"
            class="icon-btn edit-btn"
            title="View Details"
          >
            <i class="fa-solid fa-eye"></i>
          </a>
        </td>
      </tr>
      } @empty {
      <tr>
        <td colspan="6" class="empty-state">
          No offers yet.
          <br />
          <span class="text-muted" style="font-size: 0.9rem">
            Update a Job Application status to
            <strong>"Offer Received"</strong> to add one!
          </span>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
